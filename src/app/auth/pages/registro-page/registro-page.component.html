<div class="contenedor">
  <app-nav-bar></app-nav-bar>
</div>

<div class="space">
  <div class="formulario-contenedor">
    <mat-card class="formulario-card">
      <div class="contenedor">
        <h1 class="registro__title">Crear cuenta</h1>
        <mat-error *ngIf="msg.title" class="error-message">
          <strong>{{msg.title}}</strong>: {{msg.msg}}
        </mat-error>
      </div>
      
      <form [formGroup]="registroForm" (ngSubmit)="onSubmit()" class="registro-form">
        <!-- Información Personal -->
        <div class="form-section">
          <h2 class="section-title">Información Personal</h2>
          
          <mat-form-field appearance="fill" class="formulario-campo">
            <mat-label>Nombre</mat-label>
            <input matInput formControlName="nombre" required>
            <mat-error *ngIf="registroForm.get('nombre')?.errors?.['required']">
              El nombre es obligatorio
            </mat-error>
            <mat-error *ngIf="registroForm.get('nombre')?.errors?.['minlength']">
              El nombre debe tener al menos 2 caracteres
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill" class="formulario-campo">
            <mat-label>Apellido</mat-label>
            <input matInput formControlName="apellido" required>
            <mat-error *ngIf="registroForm.get('apellido')?.errors?.['required']">
              El apellido es obligatorio
            </mat-error>
            <mat-error *ngIf="registroForm.get('apellido')?.errors?.['minlength']">
              El apellido debe tener al menos 2 caracteres
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill" class="formulario-campo">
            <mat-label>Email</mat-label>
            <input matInput formControlName="email" required type="email">
            <mat-error *ngIf="registroForm.get('email')?.errors?.['required']">
              El email es obligatorio
            </mat-error>
            <mat-error *ngIf="registroForm.get('email')?.errors?.['email']">
              Por favor ingresa un email válido
            </mat-error>
          </mat-form-field>
        </div>

        <!-- Seguridad -->
        <div class="form-section">
          <h2 class="section-title">Seguridad</h2>
          
          <mat-form-field appearance="fill" class="formulario-campo">
            <mat-label>Contraseña</mat-label>
            <input matInput formControlName="pass" type="password" required>
            <mat-error *ngIf="registroForm.get('pass')?.errors?.['required']">
              La contraseña es obligatoria
            </mat-error>
            <mat-error *ngIf="registroForm.get('pass')?.errors?.['minlength']">
              La contraseña debe tener al menos 8 caracteres
            </mat-error>
            <mat-error *ngIf="registroForm.get('pass')?.errors?.['missingUpperCase']">
              Debe contener al menos una mayúscula
            </mat-error>
            <mat-error *ngIf="registroForm.get('pass')?.errors?.['missingNumber']">
              Debe contener al menos un número
            </mat-error>
            <mat-error *ngIf="registroForm.get('pass')?.errors?.['missingSpecialChar']">
              Debe contener al menos un carácter especial
            </mat-error>
            <mat-hint>Requisitos: 8+ caracteres, mayúscula, minúscula, número y carácter especial</mat-hint>
          </mat-form-field>
        </div>

        <!-- Información Adicional -->
        <div class="form-section">
          <h2 class="section-title">Información Adicional</h2>
          
          <mat-form-field appearance="fill" class="formulario-campo">
            <mat-label>Teléfono</mat-label>
            <input matInput formControlName="phone" type="tel">
            <mat-error *ngIf="registroForm.get('phone')?.errors?.['required']">
              El teléfono es obligatorio
            </mat-error>
            <mat-error *ngIf="registroForm.get('phone')?.errors?.['invalidPhone']">
              Ingresa un número de teléfono válido (10-11 dígitos)
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill" class="formulario-campo">
            <mat-label>Dirección</mat-label>
            <input matInput formControlName="direccion">
            <mat-error *ngIf="registroForm.get('direccion')?.errors?.['required']">
              La dirección es obligatoria
            </mat-error>
            <mat-error *ngIf="registroForm.get('direccion')?.errors?.['minlength']">
              La dirección debe tener al menos 5 caracteres
            </mat-error>
          </mat-form-field>
        </div>

        <div class="btns">
          <!-- <a routerLink="/auth/login" class="btn-Original-azul">Volver</a> -->
          <button type="submit" class="btn-Original" [disabled]="registroForm.invalid || isSubmitting">
            {{isSubmitting ? 'Registrando...' : 'Crear cuenta'}}
          </button>
        </div>
        <a target="vlak" routerLink="/auth/politicas">Política de Privacidad</a>
      </form>
    </mat-card>
  </div>
</div>